<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø²ÙŠØªÙˆÙ† Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f1; font-family: 'Segoe UI', Tahoma, sans-serif; }
        .header-bg { background: linear-gradient(135deg, #556b2f, #2e3b1a); color: white; padding: 20px; border-radius: 0 0 20px 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .card { border-radius: 15px; border: none; box-shadow: 0 4px 8px rgba(0,0,0,0.05); margin-bottom: 15px; }
        .btn-farm { background-color: #8b4513; color: white; margin: 2px; }
        .btn-op { background-color: #556b2f; color: white; margin: 2px; border: none; }
        .stats-val { font-weight: bold; color: #556b2f; }
    </style>
</head>
<body>

<div class="header-bg text-center">
    <h3>ğŸŒ³ Ù…Ù†Ø¸ÙˆÙ…Ø© Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</h3>
    <select id="farmSelect" class="form-select w-50 mx-auto mt-2" onchange="updateUI()">
        <option value="Ø§Ù„Ù…Ø²Ø±Ø¹Ø© 1">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø±Ù‚Ù… (1)</option>
        <option value="Ø§Ù„Ù…Ø²Ø±Ø¹Ø© 2">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø±Ù‚Ù… (2)</option>
        <option value="Ø§Ù„Ù…Ø²Ø±Ø¹Ø© 3">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø±Ù‚Ù… (3)</option>
    </select>
</div>

<div class="container mt-3">
    <div class="row g-2 mb-3">
        <div class="col-6"><div class="card p-2 text-center small"><span>Ø²ÙŠØªÙˆÙ†</span><br><span id="kg" class="stats-val">0</span></div></div>
        <div class="col-6"><div class="card p-2 text-center small"><span>Ø²ÙŠØª</span><br><span id="lt" class="stats-val">0</span></div></div>
    </div>

    <div class="card p-3">
        <h6>ğŸšœ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©:</h6>
        <div class="d-flex flex-wrap">
            <button class="btn btn-op btn-sm" onclick="log('Ø±ÙŠ','Ø­Ø§Ù„Ø© Ø§Ù„Ø±ÙŠ ÙˆØ§Ù„ÙƒÙ…ÙŠØ©:')">ğŸ’§ Ø±ÙŠ</button>
            <button class="btn btn-op btn-sm" onclick="log('ØªØ³Ù…ÙŠØ¯','Ù†ÙˆØ¹ Ø§Ù„Ø³Ù…Ø§Ø¯ ÙˆØ§Ù„ÙƒÙ…ÙŠØ©:')">ğŸ§ª ØªØ³Ù…ÙŠØ¯</button>
            <button class="btn btn-op btn-sm" onclick="log('Ø±Ø´','Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¨ÙŠØ¯ ÙˆØ§Ù„ØºØ±Ø¶:')">ğŸ’¨ Ø±Ø´</button>
            <button class="btn btn-op btn-sm" onclick="add('kg','Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ø§Ù„ÙƒØ¬Ù…:','Ø­ØµØ§Ø¯')">ğŸ“¦ Ø­ØµØ§Ø¯</button>
        </div>
    </div>

    <div class="card p-3">
        <h6>ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ø§Ù„Ø© ÙˆØ§Ù„ØºÙŠØ§Ø¨:</h6>
        <div class="d-flex flex-wrap">
            <button class="btn btn-primary btn-sm m-1" onclick="log('Ø­Ø¶ÙˆØ±','Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„:')">âœ… Ø­Ø¶ÙˆØ±</button>
            <button class="btn btn-danger btn-sm m-1" onclick="log('ØºÙŠØ§Ø¨','Ø§Ø³Ù… Ø§Ù„ØºØ§Ø¦Ø¨:')">âŒ ØºÙŠØ§Ø¨</button>
            <button class="btn btn-info btn-sm m-1 text-white" onclick="log('Ø¥Ø¬Ø§Ø²Ø©','Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©:')">ğŸ–ï¸ Ø¥Ø¬Ø§Ø²Ø©</button>
            <button class="btn btn-secondary btn-sm m-1" onclick="showMonthlyReport()">ğŸ“… ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ</button>
        </div>
    </div>

    <div class="card p-3">
        <h6>ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø· (Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©):</h6>
        <div class="table-responsive">
            <table class="table table-sm small">
                <thead><tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th></tr></thead>
                <tbody id="logs"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('olive_pro_db')) || {};

    function updateUI() {
        let farm = document.getElementById('farmSelect').value;
        if(!db[farm]) db[farm] = {l:[], kg:0, lt:0};
        
        document.getElementById('kg').innerText = db[farm].kg + " ÙƒØ¬Ù…";
        document.getElementById('lt').innerText = db[farm].lt + " Ù„ØªØ±";
        
        document.getElementById('logs').innerHTML = db[farm].l.map(x => `
            <tr><td>${x.d}</td><td><b>${x.t}</b></td><td>${x.m}</td></tr>
        `).reverse().slice(0, 10).join(''); // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 10 Ø¹Ù…Ù„ÙŠØ§Øª ÙÙ‚Ø·
        
        localStorage.setItem('olive_pro_db', JSON.stringify(db));
    }

    function log(type, msg) {
        let val = prompt(msg);
        let farm = document.getElementById('farmSelect').value;
        if(val) {
            db[farm].l.push({ d: new Date().toLocaleDateString('ar-EG'), t: type, m: val });
            updateUI();
        }
    }

    function add(key, msg, type) {
        let val = prompt(msg);
        let farm = document.getElementById('farmSelect').value;
        if(val && !isNaN(val)) {
            db[farm][key] += parseFloat(val);
            db[farm].l.push({ d: new Date().toLocaleDateString('ar-EG'), t: type, m: "Ø¥Ø¶Ø§ÙØ© " + val });
            updateUI();
        }
    }

    function showMonthlyReport() {
        let farm = document.getElementById('farmSelect').value;
        let report = db[farm].l.reduce((acc, curr) => {
            if(['Ø­Ø¶ÙˆØ±','ØºÙŠØ§Ø¨','Ø¥Ø¬Ø§Ø²Ø©'].includes(curr.t)) {
                let key = curr.m + " (" + curr.t + ")";
                acc[key] = (acc[key] || 0) + 1;
            }
            return acc;
        }, {});
        
        let msg = "Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ù‡Ø±ÙŠ Ù„Ù„Ø¹Ù…Ø§Ù„Ø©:\n";
        for (let k in report) msg += `${k}: ${report[k]} Ø£ÙŠØ§Ù…\n`;
        alert(Object.keys(report).length ? msg : "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ø¹Ù…Ø§Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±.");
    }

    updateUI();
</script>
</body>
</html>
